# Progress

## 2025-11-17 時点の進捗

- Step1 要件（GAME_DESIGN.md 10.開発計画）のうち、神父NPC追加(9.7)、セーブ/ロード機能(9.1)、死亡ペナルティ(9.2)、UI調整(9.14)を実装済み。
  - 街の教会に神父を配置し、指定スプライト/座標で描画。会話から教会オーバーレイを開き、祈りで記録できる。
  - `save_system.js`を新規作成し、プレイヤー状態・進行フラグ・位置・宝箱状態などをlocalStorageへ保存/読込。「続きから」ボタンも追加した。
  - 戦闘敗北/飢餓による気絶時、神父前へ復活しGold/Food半減・HP全快にリセット。復活メッセージも仕様に合わせて更新。
  - 教会オーバーレイやタイトルメニューを宿屋/ショップ同等のサイズ感で統一し、Y/Nや矢印で操作できるように整理。
  - 宝箱取得メッセージの文字化けを修正し、「宝箱を開けた！ Ancient Key を手に入れた。」と表示されるようにした。

## 2025-11-20 時点の進捗

- Step2: 装備・経済バランスの先行整備（完了）
  - `constants.js` に木/銅/鉄/聖の剣・盾、力のハンマー/聖鉱石など新アイテムIDを追加
  - `data/items.js` をメタデータ駆動に刷新し、カテゴリ・価格・装備ボーナス・消費効果を一元管理
  - `state/player_state.js` の購入/売却/使用/装備ロジックをメタデータ参照型へリファクタリングし、装備ボーナスを汎用処理化
  - `shop.js` に木/銅/鉄の剣と盾を販売リストとして追加し、UI表示もメタデータベースに変更
  - `renderer/ui_panel.js` を更新し、ステータスパネルで現在装備している武器/盾の名称がインベントリに合わせて表示されるようにした
