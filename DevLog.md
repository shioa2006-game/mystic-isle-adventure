# 開発中のメモ

## フェーズ/NPC/メッセージ統合表

| 項目 | フェーズ0<br>**START** | フェーズ1<br>**BLACKSMITH_RESCUED** | フェーズ2<br>**ORE_OBTAINED** | フェーズ3<br>**HOLY_SWORD_CREATED** | フェーズ4<br>**DRAGON_DEFEATED** |
|:---|:---|:---|:---|:---|:---|
| **到達条件（フラグ）** | ゲーム開始時 | `blacksmithRescued=true` | `hasOre=true` | `holySwordCreated=true` | `dragonDefeated=true` |
| **王様のセリフ** | 「よく来た、若き冒険者よ。」<br>「遺跡に恐ろしい竜が現れたのだ。」<br>「倒すには伝説の聖剣と聖盾が必要だ。」<br>「だが鍛冶屋が行方不明で困っている。」 | 「鍛冶屋を助けてくれたそうだな。」<br>「聖剣を鍛えるには聖鉱石が欠かせぬ。」<br>「鍛冶屋と協力して手に入れてきてくれ。」 | 「聖鉱石を見つけたのだな。」<br>「早く鍛冶屋に届け、聖剣を完成させるのだ。」 | 「おお、見事な聖剣だ！」<br>「約束通り、聖盾を授けよう。」<br>「これで竜にも立ち向かえるはずだ。」<br><br>**（盾受取後）**<br>「聖剣と聖盾を手にしたな。」<br>「その力で竜を倒し、島を救ってくれ！」 | 「竜を倒し、島を救ってくれて感謝するぞ！」 |
| **鍛冶屋のセリフ** | 「助けてくれて本当に感謝する！」<br>「だが聖鉱石はここにはなかった…」<br>「俺は街へ戻ることにする。君も気をつけろ。」 | 「命の恩人だ。礼に力のハンマーを渡そう。」<br>「東の海岸に岩で塞がれた洞窟があっただろう。」<br>「これなら岩を砕ける。聖鉱石はその奥に眠っているはずだ。」<br><br>**（ハンマー受取後）**<br>「そのハンマーで東の海岸の岩を砕けるはずだ。」<br>「聖鉱石はその奥に眠っているはずだ。頼んだぞ。」 | 「おお、これこそ聖鉱石だ！」<br>「聖剣を鍛えるには鉄の剣も必要だ。」<br>「商人から手に入れて持ってきてくれ。」 | 「聖剣の出来栄えは完璧だ。」<br>「聖盾は王様に頼んで受け取ってくれ。」<br>「君なら必ず竜を倒せるはずだ。」 | （セリフ定義なし） |
| **神父のセリフ** | 「ようこそ、旅の冒険者よ。」<br>「ここで祈れば旅路を記録できる。」<br>「倒れてもここから再び立ち上がれる。」 | （フェーズ0と同じ） | （フェーズ0と同じ） | （フェーズ0と同じ） | （フェーズ0と同じ） |
| **会話後イベント** | **王**: `questTalked=true`, `questGiven=true`<br>**鍛**: `finalizeBlacksmithRescue()` | **鍛**: `tryGivePowerHammer()` | **鍛**: `tryForgeHolySword()` | **王**: `tryGrantHolyShield()` | - |
| **必要アイテム** | - | インベントリ空き1枠 | **鉄の剣** + 聖鉱石 | インベントリ空き1枠 | - |
| **成功時メッセージ** | **鍛**: 「鍛冶屋は無事に街へ戻っていった。」 | 「Power Hammer を受け取った。」 | 「鍛冶屋が聖剣を鍛え上げた！」 | 「聖盾を授かった！」 | - |
| **失敗時メッセージ** | - | 「インベントリの空きが必要だ。」 | **「鉄の剣を持っていないため、鍛冶が始められない。」**<br>または<br>「聖鉱石を所持していない。」 | 「インベントリの整理が必要だ。」 | - |
| **獲得アイテム** | - | **力のハンマー** | **聖剣**<br>（鉄の剣と聖鉱石を消費） | **聖盾** | - |
